(()=>{var e={};e.id=651,e.ids=[651],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9643:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>x});var t=r(60687),a=r(43210),i=r(63213),n=r(16189),o=r(44493),c=r(29523),l=r(96834),d=r(41862),u=r(13964);function p(){let{user:e,loading:s}=(0,i.A)(),r=(0,n.useRouter)();(0,n.useSearchParams)();let[p,x]=(0,a.useState)([]),[m,h]=(0,a.useState)(null),[f,b]=(0,a.useState)(!0),[g,v]=(0,a.useState)(null),j=async s=>{if(!e)return void r.push("/login");if(s)try{v(s);let e=await fetch("/api/subscriptions/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:s})});if(e.ok){let{url:s}=await e.json();window.location.href=s}else{let s=await e.json();alert(s.error||"Failed to create checkout session")}}catch(e){console.error("Error creating checkout session:",e),alert("Failed to start checkout process")}finally{v(null)}},y=async()=>{if(e)try{v("manage");let e=await fetch("/api/subscriptions/portal",{method:"POST"});if(e.ok){let{url:s}=await e.json();window.location.href=s}else{let s=await e.json();alert(s.error||"Failed to create portal session")}}catch(e){console.error("Error creating portal session:",e),alert("Failed to access customer portal")}finally{v(null)}},w=e=>{if(0===e.amount)return"Free";let s=e.amount/100;return`$${s}/${e.interval_type||"month"}`},N=(e,s)=>!0===s?"Yes":!1===s?"No":-1===s?"Unlimited":"storage_gb"===e&&"number"==typeof s?`${s} GB`:"max_users"===e&&"number"==typeof s||"api_calls_per_month"===e&&"number"==typeof s?s.toLocaleString():"string"==typeof s?s.charAt(0).toUpperCase()+s.slice(1):String(s),_=e=>({max_users:"Max Users",api_calls_per_month:"API Calls/Month",storage_gb:"Storage",support_level:"Support Level",custom_branding:"Custom Branding",advanced_analytics:"Advanced Analytics",priority_support:"Priority Support",sso:"Single Sign-On"})[e]||e,k=e=>m?.plan.id===e,P=e=>!("Free"===e.name||k(e.id))&&!!e.price.stripe_price_id;return s||f?(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,t.jsx)(d.A,{className:"h-8 w-8 animate-spin"})})}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Subscription Plans"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Choose the plan that's right for you"})]}),e&&m&&(0,t.jsxs)(o.Zp,{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsx)(o.ZB,{children:"Current Plan"}),(0,t.jsx)(o.BT,{children:"Your active subscription"})]}),(0,t.jsx)(o.Wu,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:m.plan.name}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:w(m.plan.price)}),m.subscription&&(0,t.jsxs)("div",{className:"mt-2 space-y-1 text-sm",children:[(0,t.jsxs)("p",{children:["Status: ",(0,t.jsx)(l.E,{variant:"active"===m.subscription.status?"default":"destructive",children:m.subscription.status})]}),m.subscription.cancel_at_period_end&&(0,t.jsx)("p",{className:"text-orange-600",children:"Cancels at period end"})]})]}),m.subscription&&(0,t.jsxs)(c.$,{onClick:y,disabled:"manage"===g,variant:"outline",children:["manage"===g?(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):null,"Manage Subscription"]})]})})]}),(0,t.jsx)("div",{className:"grid gap-6 md:grid-cols-3 max-w-6xl mx-auto",children:p.map(s=>(0,t.jsxs)(o.Zp,{className:k(s.id)?"border-blue-500 shadow-md":"",children:[(0,t.jsxs)(o.aR,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(o.ZB,{children:s.name}),k(s.id)&&(0,t.jsx)(l.E,{children:"Current"})]}),(0,t.jsx)(o.BT,{children:s.description}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:w(s.price)})]}),(0,t.jsx)(o.Wu,{children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(s.features).map(([e,s])=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.A,{className:"h-4 w-4 text-green-500 flex-shrink-0"}),(0,t.jsxs)("span",{className:"text-sm",children:[_(e),": ",(0,t.jsx)("strong",{children:N(e,s)})]})]},e))}),(0,t.jsx)("div",{className:"pt-4",children:e?k(s.id)?(0,t.jsx)(c.$,{className:"w-full",variant:"outline",disabled:!0,children:"Current Plan"}):P(s)?(0,t.jsxs)(c.$,{className:"w-full",onClick:()=>m?.subscription?y():j(s.price.stripe_price_id),disabled:g===s.price.stripe_price_id||"manage"===g,children:[g===s.price.stripe_price_id||m?.subscription&&"manage"===g?(0,t.jsx)(d.A,{className:"h-4 w-4 animate-spin mr-2"}):null,m?.subscription?"Switch Plan":"Subscribe"]}):(0,t.jsx)(c.$,{className:"w-full",variant:"outline",disabled:!0,children:"Free"===s.name?"Default Plan":"Contact Sales"}):(0,t.jsx)(c.$,{className:"w-full",onClick:()=>r.push("/login"),children:"Sign In to Subscribe"})})]})})]},s.id))}),!e&&(0,t.jsx)("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400 mt-8",children:(0,t.jsx)("p",{children:"Sign in to view your current subscription and manage your plan"})})]})})}function x(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)(d.A,{className:"h-8 w-8 animate-spin"})})})}),children:(0,t.jsx)(p,{})})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},13964:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19981:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/sydnee/icanswimbeta/src/app/subscriptions/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/sydnee/icanswimbeta/src/app/subscriptions/page.tsx","default")},23467:(e,s,r)=>{Promise.resolve().then(r.bind(r,9643))},27910:e=>{"use strict";e.exports=require("stream")},29043:(e,s,r)=>{Promise.resolve().then(r.bind(r,19981))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},41862:(e,s,r)=>{"use strict";r.d(s,{A:()=>t});let t=(0,r(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},44493:(e,s,r)=>{"use strict";r.d(s,{BT:()=>c,Wu:()=>l,ZB:()=>o,Zp:()=>i,aR:()=>n});var t=r(60687);r(43210);var a=r(4780);function i({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function n({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function l({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70440:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});var t=r(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84065:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var t=r(65239),a=r(48088),i=r(88170),n=r.n(i),o=r(30893),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(s,c);let l={children:["",{children:["subscriptions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19981)),"/Users/sydnee/icanswimbeta/src/app/subscriptions/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,80946)),"/Users/sydnee/icanswimbeta/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/sydnee/icanswimbeta/src/app/subscriptions/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/subscriptions/page",pathname:"/subscriptions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},96834:(e,s,r)=>{"use strict";r.d(s,{E:()=>c});var t=r(60687);r(43210);var a=r(8730),i=r(24224),n=r(4780);let o=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function c({className:e,variant:s,asChild:r=!1,...i}){let c=r?a.DX:"span";return(0,t.jsx)(c,{"data-slot":"badge",className:(0,n.cn)(o({variant:s}),e),...i})}}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,834,658,33],()=>r(84065));module.exports=t})();